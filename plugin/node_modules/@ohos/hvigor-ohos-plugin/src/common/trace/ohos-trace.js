"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ohosTrace=void 0;const hvigor_1=require("@ohos/hvigor");class OhosTrace{constructor(){this.data={MODULES:[]},hvigor_1.hvigor.buildFinished((()=>{exports.ohosTrace.transmitDataToManager()}))}transmitDataToManager(){hvigor_1.TraceManager.trace(OhosTrace.TRACE_KEY,this.data,(()=>{var e,o;null===(o=null===(e=this.data)||void 0===e?void 0:e.MODULES)||void 0===o||o.forEach((e=>{delete e.RESTOOL_COMPRESSION,delete e.INCREMENTAL_TASKS}))}))}traceBuildMode(e){var o,a;const t=null===(o=hvigor_1.globalData.cliEnv.configProps)||void 0===o?void 0:o.get("prop");t&&(this.data.BUILD_MODE=null!==(a=t.get("buildMode"))&&void 0!==a?a:e)}traceModules(e,o){const a=hvigor_1.TraceManager.anonymize(e),t=this.data.MODULES.filter((e=>e.MODULE_NAME!==a));t.push({MODULE_NAME:a,API_TYPE:o}),this.data.MODULES=t}getModule(e){const o=hvigor_1.TraceManager.anonymize(e);return this.data.MODULES.find((e=>e.MODULE_NAME===o))}traceRestoolCompression(e,o){const a=this.getModule(e);a&&(a.RESTOOL_COMPRESSION=o)}traceIncrement(e,o,a){var t;const r=this.getModule(e);r&&(r.INCREMENTAL_TASKS=null!==(t=r.INCREMENTAL_TASKS)&&void 0!==t?t:{},r.INCREMENTAL_TASKS[o]=a)}}OhosTrace.TRACE_KEY="HVIGOR_OHOS_PLUGIN",exports.ohosTrace=new OhosTrace;