"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateHarModuleInfo=void 0;const fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),task_names_js_1=require("../common/task-names.js"),ohos_hap_task_js_1=require("../task/ohos-hap-task.js"),MODULE_INFO_CODE="\n//@ts-noCheck\nexport const __MODULE_NAME__: string = __getCurrentModuleName__()\nexport const __BUNDLE_NAME__: string = __getCurrentBundleName__()\n";class CreateHarModuleInfo extends ohos_hap_task_js_1.OhosHapTask{constructor(e){super(e,task_names_js_1.TaskNames.CommonTask.CREATE_HAR_MODULE_INFO),this.outputFile=this.pathInfo.getHarGenerateModuleInfoPath()}declareInputs(){return super.declareInputs().set("isByteCodeHar",this.targetService.isByteCodeHar())}declareOutputFiles(){return super.declareOutputFiles().addEntry(this.outputFile,{isDirectory:!1})}taskShouldDo(){return this.targetService.isByteCodeHar()}beforeTask(){fs_extra_1.default.existsSync(this.outputFile)&&fs_extra_1.default.removeSync(this.outputFile)}async doTaskAction(){fs_extra_1.default.ensureDirSync(path_1.default.dirname(this.outputFile)),fs_extra_1.default.writeFileSync(this.outputFile,MODULE_INFO_CODE,{encoding:"utf-8"})}initTaskDepends(){}}exports.CreateHarModuleInfo=CreateHarModuleInfo;