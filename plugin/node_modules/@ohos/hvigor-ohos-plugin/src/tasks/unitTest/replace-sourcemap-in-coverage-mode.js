"use strict";var __decorate=this&&this.__decorate||function(e,t,o,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,a);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplaceSourcemapInCoverageMode=void 0;const hvigor_1=require("@ohos/hvigor"),path_1=__importDefault(require("path")),task_names_js_1=require("../common/task-names.js"),build_directory_const_js_1=require("../../const/build-directory-const.js"),ohos_module_task_js_1=require("../task/ohos-module-task.js"),inject_util_js_1=require("../../utils/inject-util.js"),sourcemap_util_js_1=require("../../utils/sourcemap-util.js");class ReplaceSourcemapInCoverageMode extends ohos_module_task_js_1.OhosModuleTask{constructor(e){super(e,task_names_js_1.TaskNames.Task.REPLACE_SOURCEMAP_IN_COVERAGE_MODE),this.unitTestSourceMapPath=path_1.default.join(this.pathInfo.getModulePath(),".test/default/intermediates/test/coverage_sourcemap/unitTestSourceMap.map"),this.defaultSourceMapPath=path_1.default.join(this.pathInfo.getInterMediatesAssetsPath(),"ets",build_directory_const_js_1.BuildArtifactConst.SOURCEMAPS_MAP)}async doTaskAction(){inject_util_js_1.InjectUtil.isOhosTestCoverage()&&await(0,sourcemap_util_js_1.overWriteSourceMap)(this.defaultSourceMapPath,this.unitTestSourceMapPath)}initTaskDepends(){}}__decorate([(0,hvigor_1.InputFile)()],ReplaceSourcemapInCoverageMode.prototype,"unitTestSourceMapPath",void 0),__decorate([(0,hvigor_1.OutputFile)()],ReplaceSourcemapInCoverageMode.prototype,"defaultSourceMapPath",void 0),exports.ReplaceSourcemapInCoverageMode=ReplaceSourcemapInCoverageMode;