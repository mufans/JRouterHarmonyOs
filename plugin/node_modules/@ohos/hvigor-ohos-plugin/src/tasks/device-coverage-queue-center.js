"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deviceCoverageQueueCenter=exports.DeviceCoverageQueueCenter=void 0;const hvigor_arkts_compose_1=require("@ohos/hvigor-arkts-compose");class DeviceCoverageQueueCenter{constructor(){this.queueList=[],this.isExecuting=!1,this.executeCoverageType="generateOhosTestResult",this.queueList=[]}async executeProxy(e,t){if(this.executeCoverageType=t||"generateOhosTestResult",this.isExecuting)return new Promise(((t,s)=>{this.queueList.push({params:e,resolve:t,reject:s})}));await this.innerExecuteProxy(e)}async dequeue(){if(!this.queueList.length)return;const e=this.queueList.shift();if(!e)return;const{resolve:t,reject:s,params:r}=e;try{await this.innerExecuteProxy(r),t(!0)}catch(e){s(e)}}async innerExecuteProxy(e){try{this.isExecuting=!0,"generateUnitTestResult"===this.executeCoverageType?await(0,hvigor_arkts_compose_1.generateUnitTestResult)(e):await(0,hvigor_arkts_compose_1.generateOhosTestResult)(e),this.isExecuting=!1,this.dequeue()}catch(e){throw this.isExecuting=!1,this.queueList=[],e}}}exports.DeviceCoverageQueueCenter=DeviceCoverageQueueCenter,exports.deviceCoverageQueueCenter=new DeviceCoverageQueueCenter;