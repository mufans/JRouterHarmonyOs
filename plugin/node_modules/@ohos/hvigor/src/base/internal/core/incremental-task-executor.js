"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.doIncrementalTask=void 0;const hvigor_log_js_1=require("../../log/hvigor-log.js"),task_proxy_js_1=require("../task/proxy/task-proxy.js"),task_proxy_manager_js_1=require("../task/proxy/task-proxy-manager.js"),global_core_parameters_js_1=require("../data/global-core-parameters.js"),log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-incremental-task");async function doIncrementalTask(e){const t=e,a=task_proxy_manager_js_1.taskProxyManager.set(t.getPath(),new task_proxy_js_1.TaskProxy(t));if(await t.beforeAlwaysAction(),function(){if(!global_core_parameters_js_1.coreParameter.startParams.incrementalExecution)return!0;const t=e.taskExecutedStatus.unTrackStateReason;if(t)return log.debug(`${e.getPath()} will not track state,eg do incremental,because:${t}`),!0;return!1}())t.declareInputs(),t.declareInputFiles(),await a.execute();else{a.preExecute()?t.taskExecutedStatus.setIsUpToDate(!0):await a.execute()}}exports.doIncrementalTask=doIncrementalTask;